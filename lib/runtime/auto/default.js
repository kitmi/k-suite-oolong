"use strict";

require("source-map-support/register");

const Types = require('../types');

function auto(info, i18n) {
  if (!Types.Builtin.has(info.type)) {
    throw new Error(`Unknown primitive type: "${info.type}"."`);
  }

  if (!info.auto) {
    throw new Error(`Not an automatically generated field "${info.name}".`);
  }

  if (info.generator) {
    let name, options;

    if (typeof info.generator === 'string') {
      name = info.generator;
    } else if (Array.isArray(info.generator)) {
      if (!(info.generator.length > 0)) {
        throw new Error("Function \"auto\" assertion failed: info.generator.length > 0");
      }

      name = info.generator[0];

      if (info.generator.length > 1) {
        options = info.generator[1];
      }
    } else {
      name = info.generator.name;
      options = info.generator.options;
    }

    let gtor = G[name];
    return gtor(info, i18n, options);
  }

  let typeObjerct = Types[info.type];
  return typeObjerct.generate(info, i18n);
}

;
module.exports = auto;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9ydW50aW1lL2F1dG8vZGVmYXVsdC5qcyJdLCJuYW1lcyI6WyJUeXBlcyIsInJlcXVpcmUiLCJhdXRvIiwiaW5mbyIsImkxOG4iLCJCdWlsdGluIiwiaGFzIiwidHlwZSIsIm5hbWUiLCJnZW5lcmF0b3IiLCJvcHRpb25zIiwiQXJyYXkiLCJpc0FycmF5IiwibGVuZ3RoIiwiZ3RvciIsIkciLCJ0eXBlT2JqZXJjdCIsImdlbmVyYXRlIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7QUFFQSxNQUFNQSxLQUFLLEdBQUdDLE9BQU8sQ0FBQyxVQUFELENBQXJCOztBQUVBLFNBQVNDLElBQVQsQ0FBY0MsSUFBZCxFQUFvQkMsSUFBcEIsRUFBMEI7QUFBQSxPQUVsQkosS0FBSyxDQUFDSyxPQUFOLENBQWNDLEdBQWQsQ0FBa0JILElBQUksQ0FBQ0ksSUFBdkIsQ0FGa0I7QUFBQSxvQkFFYSw0QkFBMkJKLElBQUksQ0FBQ0ksSUFBSyxLQUZsRDtBQUFBOztBQUFBLE9BR2xCSixJQUFJLENBQUNELElBSGE7QUFBQSxvQkFHTix5Q0FBeUNDLElBQUksQ0FBQ0ssSUFBTSxJQUg5QztBQUFBOztBQU10QixNQUFJTCxJQUFJLENBQUNNLFNBQVQsRUFBb0I7QUFDaEIsUUFBSUQsSUFBSixFQUFVRSxPQUFWOztBQUdBLFFBQUksT0FBT1AsSUFBSSxDQUFDTSxTQUFaLEtBQTBCLFFBQTlCLEVBQXdDO0FBQ3BDRCxNQUFBQSxJQUFJLEdBQUdMLElBQUksQ0FBQ00sU0FBWjtBQUNILEtBRkQsTUFFTyxJQUFJRSxLQUFLLENBQUNDLE9BQU4sQ0FBY1QsSUFBSSxDQUFDTSxTQUFuQixDQUFKLEVBQW1DO0FBQUEsWUFDOUJOLElBQUksQ0FBQ00sU0FBTCxDQUFlSSxNQUFmLEdBQXdCLENBRE07QUFBQTtBQUFBOztBQUV0Q0wsTUFBQUEsSUFBSSxHQUFHTCxJQUFJLENBQUNNLFNBQUwsQ0FBZSxDQUFmLENBQVA7O0FBRUEsVUFBSU4sSUFBSSxDQUFDTSxTQUFMLENBQWVJLE1BQWYsR0FBd0IsQ0FBNUIsRUFBK0I7QUFDM0JILFFBQUFBLE9BQU8sR0FBR1AsSUFBSSxDQUFDTSxTQUFMLENBQWUsQ0FBZixDQUFWO0FBQ0g7QUFDSixLQVBNLE1BT0E7QUFDSEQsTUFBQUEsSUFBSSxHQUFHTCxJQUFJLENBQUNNLFNBQUwsQ0FBZUQsSUFBdEI7QUFDQUUsTUFBQUEsT0FBTyxHQUFHUCxJQUFJLENBQUNNLFNBQUwsQ0FBZUMsT0FBekI7QUFDSDs7QUFFRCxRQUFJSSxJQUFJLEdBQUdDLENBQUMsQ0FBQ1AsSUFBRCxDQUFaO0FBQ0EsV0FBT00sSUFBSSxDQUFDWCxJQUFELEVBQU9DLElBQVAsRUFBYU0sT0FBYixDQUFYO0FBQ0g7O0FBRUQsTUFBSU0sV0FBVyxHQUFHaEIsS0FBSyxDQUFDRyxJQUFJLENBQUNJLElBQU4sQ0FBdkI7QUFDQSxTQUFPUyxXQUFXLENBQUNDLFFBQVosQ0FBcUJkLElBQXJCLEVBQTJCQyxJQUEzQixDQUFQO0FBQ0g7O0FBQUE7QUFFRGMsTUFBTSxDQUFDQyxPQUFQLEdBQWlCakIsSUFBakIiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuY29uc3QgVHlwZXMgPSByZXF1aXJlKCcuLi90eXBlcycpO1xuXG5mdW5jdGlvbiBhdXRvKGluZm8sIGkxOG4pIHtcbiAgICBwcmU6IHtcbiAgICAgICAgVHlwZXMuQnVpbHRpbi5oYXMoaW5mby50eXBlKSwgYFVua25vd24gcHJpbWl0aXZlIHR5cGU6IFwiJHtpbmZvLnR5cGV9XCIuXCJgO1xuICAgICAgICBpbmZvLmF1dG8sIGBOb3QgYW4gYXV0b21hdGljYWxseSBnZW5lcmF0ZWQgZmllbGQgXCIkeyBpbmZvLm5hbWUgfVwiLmA7XG4gICAgfVxuXG4gICAgaWYgKGluZm8uZ2VuZXJhdG9yKSB7XG4gICAgICAgIGxldCBuYW1lLCBvcHRpb25zO1xuXG4gICAgICAgIC8vY3VzdG9taXplZCBnZW5lcmF0b3JcbiAgICAgICAgaWYgKHR5cGVvZiBpbmZvLmdlbmVyYXRvciA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIG5hbWUgPSBpbmZvLmdlbmVyYXRvcjtcbiAgICAgICAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KGluZm8uZ2VuZXJhdG9yKSkge1xuICAgICAgICAgICAgYXNzZXJ0OiBpbmZvLmdlbmVyYXRvci5sZW5ndGggPiAwO1xuICAgICAgICAgICAgbmFtZSA9IGluZm8uZ2VuZXJhdG9yWzBdO1xuXG4gICAgICAgICAgICBpZiAoaW5mby5nZW5lcmF0b3IubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgICAgIG9wdGlvbnMgPSBpbmZvLmdlbmVyYXRvclsxXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG5hbWUgPSBpbmZvLmdlbmVyYXRvci5uYW1lO1xuICAgICAgICAgICAgb3B0aW9ucyA9IGluZm8uZ2VuZXJhdG9yLm9wdGlvbnM7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgZ3RvciA9IEdbbmFtZV07XG4gICAgICAgIHJldHVybiBndG9yKGluZm8sIGkxOG4sIG9wdGlvbnMpO1xuICAgIH0gXG5cbiAgICBsZXQgdHlwZU9iamVyY3QgPSBUeXBlc1tpbmZvLnR5cGVdO1xuICAgIHJldHVybiB0eXBlT2JqZXJjdC5nZW5lcmF0ZShpbmZvLCBpMThuKTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gYXV0bzsiXX0=