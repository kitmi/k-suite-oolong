"use strict";

require("source-map-support/register");

const Types = require('../types');

const G = require('../Generators');

function auto(info, i18n) {
  if (!Types.Builtin.has(info.type)) {
    throw new Error(`Unknown primitive type: "${info.type}"."`);
  }

  if (!info.auto) {
    throw new Error(`Not an automatically generated field "${info.name}".`);
  }

  if (info.generator) {
    let name, options;

    if (typeof info.generator === 'string') {
      name = info.generator;
    } else if (Array.isArray(info.generator)) {
      if (!(info.generator.length > 0)) {
        throw new Error("Function \"auto\" assertion failed: info.generator.length > 0");
      }

      name = info.generator[0];

      if (info.generator.length > 1) {
        options = info.generator[1];
      }
    } else {
      name = info.generator.name;
      options = info.generator.options;
    }

    let gtor = G[name];
    return gtor(info, i18n, options);
  }

  let typeObjerct = Types[info.type];
  return typeObjerct.generate(info, i18n);
}

;
module.exports = auto;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9ydW50aW1lL2F1dG8vZGVmYXVsdC5qcyJdLCJuYW1lcyI6WyJUeXBlcyIsInJlcXVpcmUiLCJHIiwiYXV0byIsImluZm8iLCJpMThuIiwiQnVpbHRpbiIsImhhcyIsInR5cGUiLCJuYW1lIiwiZ2VuZXJhdG9yIiwib3B0aW9ucyIsIkFycmF5IiwiaXNBcnJheSIsImxlbmd0aCIsImd0b3IiLCJ0eXBlT2JqZXJjdCIsImdlbmVyYXRlIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7QUFFQSxNQUFNQSxLQUFLLEdBQUdDLE9BQU8sQ0FBQyxVQUFELENBQXJCOztBQUNBLE1BQU1DLENBQUMsR0FBR0QsT0FBTyxDQUFDLGVBQUQsQ0FBakI7O0FBRUEsU0FBU0UsSUFBVCxDQUFjQyxJQUFkLEVBQW9CQyxJQUFwQixFQUEwQjtBQUFBLE9BRWxCTCxLQUFLLENBQUNNLE9BQU4sQ0FBY0MsR0FBZCxDQUFrQkgsSUFBSSxDQUFDSSxJQUF2QixDQUZrQjtBQUFBLG9CQUVhLDRCQUEyQkosSUFBSSxDQUFDSSxJQUFLLEtBRmxEO0FBQUE7O0FBQUEsT0FHbEJKLElBQUksQ0FBQ0QsSUFIYTtBQUFBLG9CQUdOLHlDQUF5Q0MsSUFBSSxDQUFDSyxJQUFNLElBSDlDO0FBQUE7O0FBTXRCLE1BQUlMLElBQUksQ0FBQ00sU0FBVCxFQUFvQjtBQUNoQixRQUFJRCxJQUFKLEVBQVVFLE9BQVY7O0FBR0EsUUFBSSxPQUFPUCxJQUFJLENBQUNNLFNBQVosS0FBMEIsUUFBOUIsRUFBd0M7QUFDcENELE1BQUFBLElBQUksR0FBR0wsSUFBSSxDQUFDTSxTQUFaO0FBQ0gsS0FGRCxNQUVPLElBQUlFLEtBQUssQ0FBQ0MsT0FBTixDQUFjVCxJQUFJLENBQUNNLFNBQW5CLENBQUosRUFBbUM7QUFBQSxZQUM5Qk4sSUFBSSxDQUFDTSxTQUFMLENBQWVJLE1BQWYsR0FBd0IsQ0FETTtBQUFBO0FBQUE7O0FBRXRDTCxNQUFBQSxJQUFJLEdBQUdMLElBQUksQ0FBQ00sU0FBTCxDQUFlLENBQWYsQ0FBUDs7QUFFQSxVQUFJTixJQUFJLENBQUNNLFNBQUwsQ0FBZUksTUFBZixHQUF3QixDQUE1QixFQUErQjtBQUMzQkgsUUFBQUEsT0FBTyxHQUFHUCxJQUFJLENBQUNNLFNBQUwsQ0FBZSxDQUFmLENBQVY7QUFDSDtBQUNKLEtBUE0sTUFPQTtBQUNIRCxNQUFBQSxJQUFJLEdBQUdMLElBQUksQ0FBQ00sU0FBTCxDQUFlRCxJQUF0QjtBQUNBRSxNQUFBQSxPQUFPLEdBQUdQLElBQUksQ0FBQ00sU0FBTCxDQUFlQyxPQUF6QjtBQUNIOztBQUVELFFBQUlJLElBQUksR0FBR2IsQ0FBQyxDQUFDTyxJQUFELENBQVo7QUFDQSxXQUFPTSxJQUFJLENBQUNYLElBQUQsRUFBT0MsSUFBUCxFQUFhTSxPQUFiLENBQVg7QUFDSDs7QUFFRCxNQUFJSyxXQUFXLEdBQUdoQixLQUFLLENBQUNJLElBQUksQ0FBQ0ksSUFBTixDQUF2QjtBQUNBLFNBQU9RLFdBQVcsQ0FBQ0MsUUFBWixDQUFxQmIsSUFBckIsRUFBMkJDLElBQTNCLENBQVA7QUFDSDs7QUFBQTtBQUVEYSxNQUFNLENBQUNDLE9BQVAsR0FBaUJoQixJQUFqQiIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG5jb25zdCBUeXBlcyA9IHJlcXVpcmUoJy4uL3R5cGVzJyk7XG5jb25zdCBHID0gcmVxdWlyZSgnLi4vR2VuZXJhdG9ycycpO1xuXG5mdW5jdGlvbiBhdXRvKGluZm8sIGkxOG4pIHtcbiAgICBwcmU6IHtcbiAgICAgICAgVHlwZXMuQnVpbHRpbi5oYXMoaW5mby50eXBlKSwgYFVua25vd24gcHJpbWl0aXZlIHR5cGU6IFwiJHtpbmZvLnR5cGV9XCIuXCJgO1xuICAgICAgICBpbmZvLmF1dG8sIGBOb3QgYW4gYXV0b21hdGljYWxseSBnZW5lcmF0ZWQgZmllbGQgXCIkeyBpbmZvLm5hbWUgfVwiLmA7XG4gICAgfVxuXG4gICAgaWYgKGluZm8uZ2VuZXJhdG9yKSB7XG4gICAgICAgIGxldCBuYW1lLCBvcHRpb25zO1xuXG4gICAgICAgIC8vY3VzdG9taXplZCBnZW5lcmF0b3JcbiAgICAgICAgaWYgKHR5cGVvZiBpbmZvLmdlbmVyYXRvciA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIG5hbWUgPSBpbmZvLmdlbmVyYXRvcjtcbiAgICAgICAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KGluZm8uZ2VuZXJhdG9yKSkge1xuICAgICAgICAgICAgYXNzZXJ0OiBpbmZvLmdlbmVyYXRvci5sZW5ndGggPiAwO1xuICAgICAgICAgICAgbmFtZSA9IGluZm8uZ2VuZXJhdG9yWzBdO1xuXG4gICAgICAgICAgICBpZiAoaW5mby5nZW5lcmF0b3IubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgICAgIG9wdGlvbnMgPSBpbmZvLmdlbmVyYXRvclsxXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG5hbWUgPSBpbmZvLmdlbmVyYXRvci5uYW1lO1xuICAgICAgICAgICAgb3B0aW9ucyA9IGluZm8uZ2VuZXJhdG9yLm9wdGlvbnM7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgZ3RvciA9IEdbbmFtZV07XG4gICAgICAgIHJldHVybiBndG9yKGluZm8sIGkxOG4sIG9wdGlvbnMpO1xuICAgIH0gXG5cbiAgICBsZXQgdHlwZU9iamVyY3QgPSBUeXBlc1tpbmZvLnR5cGVdO1xuICAgIHJldHVybiB0eXBlT2JqZXJjdC5nZW5lcmF0ZShpbmZvLCBpMThuKTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gYXV0bzsiXX0=